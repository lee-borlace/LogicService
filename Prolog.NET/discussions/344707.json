[
  {
    "Id": "799382",
    "ThreadId": "344707",
    "Html": "<p>[sorry for my Eng]</p>\n<p>In some culture settings (Russian e.g.) floating point is comma. The term&nbsp;</p>\n<pre style=\"font-family: Consolas; background: white; color: black; font-size: 13px;\">meanval(X,Y,Z)&nbsp;:-\r\n&nbsp;&nbsp;&nbsp;&nbsp;(Z&nbsp;is&nbsp;((X&nbsp;+&nbsp;Y)&nbsp;/&nbsp;2)).</pre>\n<pre style=\"font-family: Consolas; background: white; color: black; font-size: 13px;\">:-meanval(11.4, 12.8, M).&nbsp;</pre>\n<p>will cause error \"unrecognized input\".</p>\n<p>For fixing this behavior I use two source code corrections:</p>\n<p>Add Priority=1 in file LiteralDouble.cs:</p>\n<pre style=\"font-family: Consolas; background: white; color: black; font-size: 13px;\"><span style=\"color: blue;\">namespace</span>&nbsp;Prolog.Grammar\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;[<span style=\"color: #2b91af;\">Terminal</span>(<span style=\"color: #a31515;\">@\"-?[0-9]{1,10}\\.[0-9]{1,10}\"</span>,&nbsp;Priority=1)]\r\n&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: blue;\">internal</span>&nbsp;<span style=\"color: blue;\">sealed</span>&nbsp;<span style=\"color: blue;\">class</span>&nbsp;<span style=\"color: #2b91af;\">LiteralDouble</span>&nbsp;:&nbsp;<span style=\"color: #2b91af;\">PrologTerminal</span>\r\n&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;}\r\n}</pre>\n<pre style=\"font-family: Consolas; background: white; color: black; font-size: 13px;\">Add invariant culture when double is parsing. File Value.cs:<span style=\"color: #2b91af;\">&nbsp;</span></pre>\n<pre style=\"font-family: Consolas; background: white; color: black; font-size: 13px;\"><span style=\"color: #2b91af;\"><pre style=\"font-family: Consolas; background: white; color: black; font-size: 13px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: blue;\">public</span>&nbsp;<span style=\"color: blue;\">static</span>&nbsp;<span style=\"color: blue;\">void</span>&nbsp;Rule(<span style=\"color: #2b91af;\">Value</span>&nbsp;lhs,&nbsp;<span style=\"color: #2b91af;\">LiteralDouble</span>&nbsp;literal)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color: #2b91af;\">CodeValueDouble</span>&nbsp;codeValueDouble&nbsp;=&nbsp;<span style=\"color: blue;\">new</span>&nbsp;<span style=\"color: #2b91af;\">CodeValueDouble</span>(<span style=\"color: blue;\">double</span>.Parse(literal.Text,&nbsp;System.Globalization.<span style=\"color: #2b91af;\">CultureInfo</span>.InvariantCulture.NumberFormat));\r\n \r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lhs.CodeTerm&nbsp;=&nbsp;codeValueDouble;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n</pre>\n</span></pre>\n<pre style=\"font-family: Consolas; background: white; color: black; font-size: 13px;\">After those modifications :-meanval(11.4, 12.8, M). is working good: M=12,1 (output format (comma) in Workbench is russian-localized yet).</pre>\n<p>Is this method correct or not?</p>\n<p>Slava.</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>",
    "PostedDate": "2012-02-24T06:00:12.123-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]